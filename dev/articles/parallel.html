<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="simChef">
<title>Parallel computation in `simChef` • simChef</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parallel computation in `simChef`">
<meta property="og:description" content="simChef">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simChef</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/simChef.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/parallel.html">Parallel computation in `simChef`</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Yu-Group/simChef/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Parallel computation in `simChef`</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Yu-Group/simChef/blob/HEAD/vignettes/parallel.Rmd" class="external-link"><code>vignettes/parallel.Rmd</code></a></small>
      <div class="d-none name"><code>parallel.Rmd</code></div>
    </div>

    
    
<p>Given the large amount of computation that simulation experiments require, <code>simChef</code> uses the R package <a href="https://future.futureverse.org/" class="external-link"><code>future</code></a> to distribute computation across available resources. Users must decide upon two aspects of the distributed computation in order to effectively parallelize the simulations: <em>what</em> resources to use and <em>how</em> to use them.</p>
<p><code>simChef</code> is entirely agnostic to the answer to the <em>what</em> question; any resource that <code>future</code> supports is also supported. For example, to run your simulation experiments on your local Linux, macOS, or Windows machine using all but one of the cores, you might run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_workers</span> <span class="op">&lt;-</span> <span class="fu">availableCores</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>
<span class="fu">plan</span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="va">n_workers</span><span class="op">)</span></code></pre></div>
<p>Once a <code>future</code> plan has been set, <code>simChef</code> will execute computation according to the plan specified. To answer the <em>how</em> question, consider <code>n</code> computational “tasks” to be distributed across <code>p</code> parallel workers. Assuming each task takes approximately the same amount of time to complete regardless of the worker assigned to the task, then with <code>n=100</code> and <code>p=4</code> each worker should complete around 25 of the tasks. In the ideal setting, the total time to complete the 100 tasks should be around 4 times lower than the time it takes one worker to complete them, on average.</p>
<p>In more realistic scenarios, and especially in simulation experiments where heterogeneous methods are compared in various diverse problem settings, tasks are often much less uniform and different parallel strategies can have profound implications for the overall running time. Therefore, it’s important to carefully decide how to package your tasks in order to take greatest advantage of the available parallelism.</p>
<p>By default, <code>simChef</code> distributes computation across the available resources by splitting up the simulation’s replicates evenly across available workers, answering the <em>how</em> question. In general, one should not have fewer tasks than workers and should avoid <code>n&gt;&gt;p</code> very small tasks as the overhead of distributing computation to workers may outweigh the benefits of parallelism.</p>
<p><strong>Note</strong>: In the future we plan to give more control over how the user splits the computation across workers, with nested parallelism for cases where, e.g., <code>DGPs</code> or can be split across a few nodes (e.g., using one of the plan in the package <a href="https://future.batchtools.futureverse.org/" class="external-link"><code>future.batchtools</code></a>) and each node uses many cores to process the replicates in parallel (e.g., using the <code><a href="https://future.futureverse.org/reference/multicore.html" class="external-link">future::multicore</a></code> plan).</p>
<div class="section level2">
<h2 id="an-example-of-parallel-execution">An example of parallel execution<a class="anchor" aria-label="anchor" href="#an-example-of-parallel-execution"></a>
</h2>
<p>Practically speaking, parallelization in <code>simChef</code> works without modification to your code other than using <code>future</code> to set a parallel backend and choosing your parallelization strategy when running or fitting your experiment. In the example below, we choose the <code>multicore</code> backend (not available on Windows) to create forked R processes using all of the available cores.</p>
<p>This example shows how total replicates can quickly add up when varying across <code>DGP</code> or <code>Method</code> parameters. By varying across parameters of one of the <code>DGPs</code>, we in effect have 17 distinct data generating processes in the experiment (1 for <code>dgp1</code> and 16 for the combinations of parameters to <code>dgp2</code>), though in actuality there are only two <code>DGP</code> objects. Similarly, we effectively have 4 distinct methods, though there are only 2 <code>Method</code> objects. With <code>n_reps = 2</code>, this results in a total of 2 x 17 x 4 = 136 total rows in the results <code>tibble</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yu-group.github.io/simChef">simChef</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="va">n_cores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://future.futureverse.org/reference/re-exports.html" class="external-link">availableCores</a></span><span class="op">(</span>methods <span class="op">=</span> <span class="st">"system"</span><span class="op">)</span>
<span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multicore</span>, workers <span class="op">=</span> <span class="va">n_cores</span><span class="op">)</span>

<span class="va">dgp_fun1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">=</span><span class="fl">100</span>, <span class="va">rho</span><span class="op">=</span><span class="fl">0.5</span>, <span class="va">noise_level</span><span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">cov_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
  <span class="va">cov_mat</span><span class="op">[</span><span class="va">cov_mat</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rho</span>
  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html" class="external-link">mvrnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span>, Sigma <span class="op">=</span> <span class="va">cov_mat</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">X</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>, <span class="fl">3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="va">noise_level</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">X</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">dgp_fun2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">=</span><span class="fl">100</span>, <span class="va">p</span><span class="op">=</span><span class="fl">100</span>, <span class="va">rho</span><span class="op">=</span><span class="fl">0.5</span>, <span class="va">sparsity</span><span class="op">=</span><span class="fl">0.5</span>, <span class="va">noise_level</span><span class="op">=</span><span class="fl">1</span>,
                     <span class="va">nonzero_coeff</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">cov_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">p</span><span class="op">)</span>
  <span class="va">cov_mat</span><span class="op">[</span><span class="va">cov_mat</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">rho</span>
  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html" class="external-link">mvrnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">p</span><span class="op">)</span>, Sigma <span class="op">=</span> <span class="va">cov_mat</span><span class="op">)</span>
  <span class="va">coeff_prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sparsity</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">sparsity</span><span class="op">)</span> <span class="op">/</span> <span class="fl">4</span>, times <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
  <span class="va">coeff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="op">-</span><span class="fl">8</span>, <span class="co"># intercept</span>
    <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nonzero_coeff</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">p</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>,
      prob <span class="op">=</span> <span class="va">coeff_prob</span>
    <span class="op">)</span>
  <span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">X</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">coeff</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="va">noise_level</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">X</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">dgp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_dgp.html">create_dgp</a></span><span class="op">(</span><span class="va">dgp_fun1</span>, .name <span class="op">=</span> <span class="st">"dense_dgp"</span><span class="op">)</span>
<span class="va">dgp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_dgp.html">create_dgp</a></span><span class="op">(</span><span class="va">dgp_fun2</span>, .name <span class="op">=</span> <span class="st">"sparse_dgp"</span><span class="op">)</span>

<span class="va">ols</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">X</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">elnet</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, <span class="va">alpha</span><span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">glmnet</span><span class="fu">::</span><span class="fu"><a href="https://glmnet.stanford.edu/reference/glmnet.html" class="external-link">glmnet</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">X</span>, y <span class="op">=</span> <span class="va">y</span>, family <span class="op">=</span> <span class="st">"gaussian"</span>, alpha <span class="op">=</span> <span class="va">alpha</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">method1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_method.html">create_method</a></span><span class="op">(</span><span class="va">ols</span>, .name <span class="op">=</span> <span class="st">"ols"</span><span class="op">)</span>
<span class="va">method2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_method.html">create_method</a></span><span class="op">(</span><span class="va">elnet</span>, .name <span class="op">=</span> <span class="st">"elnet"</span><span class="op">)</span>

<span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_experiment.html">create_experiment</a></span><span class="op">(</span>
  name <span class="op">=</span> <span class="st">"exper"</span>, future.packages <span class="op">=</span> <span class="st">"dplyr"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_funs.html">add_dgp</a></span><span class="op">(</span><span class="va">dgp1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_funs.html">add_dgp</a></span><span class="op">(</span><span class="va">dgp2</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_funs.html">add_method</a></span><span class="op">(</span><span class="va">method1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_funs.html">add_method</a></span><span class="op">(</span><span class="va">method2</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>
    .dgp <span class="op">=</span> <span class="st">"sparse_dgp"</span>,
    p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1000</span><span class="op">)</span>,
    rho <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.9</span><span class="op">)</span>,
    sparsity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span>,
    nonzero_coeff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.3</span>, <span class="op">-</span><span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>
    .method <span class="op">=</span> <span class="st">"elnet"</span>, alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>
  <span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">fit</span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; Fitting exper...</span>
<span class="co">#&gt; 2 reps completed (totals: 2/2) | time taken: 0.645469 minutes</span>
<span class="co">#&gt; ==============================</span>
<span class="va">results</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 136 × 16</span></span>
<span class="co">#&gt;    .rep  .dgp_name  .method_name     p   rho sparsity nonzero_coeff alpha term  </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1     dense_dgp  elnet           <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #949494;">&lt;NULL&gt;</span>          0   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1     dense_dgp  elnet           <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #949494;">&lt;NULL&gt;</span>          0.5 &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1     dense_dgp  elnet           <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #949494;">&lt;NULL&gt;</span>          1   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1     dense_dgp  ols             <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>   <span style="color: #949494;">&lt;NULL&gt;</span>         <span style="color: #BB0000;">NA</span>   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1     sparse_dgp elnet          100   0.2      0.5 <span style="color: #949494;">&lt;dbl [4]&gt;</span>       0   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1     sparse_dgp elnet          100   0.2      0.5 <span style="color: #949494;">&lt;dbl [4]&gt;</span>       0.5 &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1     sparse_dgp elnet          100   0.2      0.5 <span style="color: #949494;">&lt;dbl [4]&gt;</span>       1   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1     sparse_dgp elnet         <span style="text-decoration: underline;">1</span>000   0.2      0.5 <span style="color: #949494;">&lt;dbl [4]&gt;</span>       0   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1     sparse_dgp elnet         <span style="text-decoration: underline;">1</span>000   0.2      0.5 <span style="color: #949494;">&lt;dbl [4]&gt;</span>       0.5 &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1     sparse_dgp elnet         <span style="text-decoration: underline;">1</span>000   0.2      0.5 <span style="color: #949494;">&lt;dbl [4]&gt;</span>       1   &lt;chr&gt; </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 126 more rows, and 7 more variables: estimate &lt;list&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   std.error &lt;list&gt;, statistic &lt;list&gt;, p.value &lt;list&gt;, step &lt;list&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   lambda &lt;list&gt;, dev.ratio &lt;list&gt;</span></span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James Duncan, Tiffany Tang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
