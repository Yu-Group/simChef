<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>simChef Vignette • simChef</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="simChef Vignette">
<meta property="og:description" content="simChef">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simChef</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/simChef.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/parallel.html">Parallel strategies in `simChef`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="simChef_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>simChef Vignette</h1>
            
      
      
      <div class="hidden name"><code>simChef.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>The goal of <code>simChef</code> is to seamlessly and efficiently run simulation experiments using a simple grammar. The results of these simulation experiments can also be conveniently viewed in an organized and interactive browser (or html file) (e.g., <a href="linear_regression_output.html">here</a>). The basic usage of <code>simChef</code> can be summarized as follows:</p>
<ol style="list-style-type: decimal">
<li>Create individual parts of the simulation experiment recipe
<ol style="list-style-type: lower-alpha">
<li>Create DGP(s) (data-generating processes) via <code><a href="../reference/create_dgp.html">create_dgp()</a></code>
</li>
<li>Create Method(s) via <code><a href="../reference/create_method.html">create_method()</a></code>
</li>
<li>Create Evaluator(s) via <code><a href="../reference/create_evaluator.html">create_evaluator()</a></code>
</li>
<li>Create Visualizer(s) via <code><a href="../reference/create_visualizer.html">create_visualizer()</a></code>
</li>
</ol>
</li>
<li>Assemble recipe parts into a complete simulation experiment recipe, e.g., via</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_experiment.html">create_experiment</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Experiment"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_dgp</a></span><span class="op">(</span><span class="va">dgp</span>, name <span class="op">=</span> <span class="st">"DGP1"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_method</a></span><span class="op">(</span><span class="va">method</span>, name <span class="op">=</span> <span class="st">"Method1"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_evaluator</a></span><span class="op">(</span><span class="va">evaluator</span>, name <span class="op">=</span> <span class="st">"Evaluator1"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_visualizer</a></span><span class="op">(</span><span class="va">visualizer</span>, name <span class="op">=</span> <span class="st">"Visualizer1"</span><span class="op">)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Run the experiment</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  
<span class="co"># or alternatively, `run_experiment(experiment, n_reps = 100, save = T)`</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Document simulation experiment recipe and visualize summary of results via R Markdown</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_rmd.html">create_rmd</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span></code></pre></div>
<p>We will next go through a toy example simulation using linear regression.</p>
</div>
<div id="create-individual-parts-of-the-simulation-experiment-recipe" class="section level1">
<h1 class="hasAnchor">
<a href="#create-individual-parts-of-the-simulation-experiment-recipe" class="anchor"></a>Create individual parts of the simulation experiment recipe</h1>
<p>To begin, we first need to create the individual parts of the simulation experiment recipe. There are four main components/classes and verbs in the simulation experiment:</p>
<ol style="list-style-type: decimal">
<li>
<strong>DGP</strong> (data-generating process): the data-generating processes from which to <strong>generate</strong> data</li>
<li>
<strong>Method</strong>: the methods (or models) to <strong>fit</strong> in the experiment</li>
<li>
<strong>Evaluator</strong>: the evaluation metrics used to <strong>evaluate</strong> the methods performance</li>
<li>
<strong>Visualizer</strong>: the visualization functions used to <strong>visualize</strong> outputs from the method fits or evaluation results (can be tables, plots, or even R Markdown snippets to display)</li>
</ol>
<p>To create a <code><a href="../reference/DGP.html">DGP()</a></code>, <code><a href="../reference/Method.html">Method()</a></code>, <code><a href="../reference/Evaluator.html">Evaluator()</a></code>, or <code><a href="../reference/Visualizer.html">Visualizer()</a></code>, we can respectively use the <code><a href="../reference/create_dgp.html">create_dgp()</a></code>, <code><a href="../reference/create_method.html">create_method()</a></code>, <code><a href="../reference/create_evaluator.html">create_evaluator()</a></code>, or <code><a href="../reference/create_visualizer.html">create_visualizer()</a></code> functions. Each <code>create_*()</code> function follows the same syntax and takes in the inputs:</p>
<ul>
<li>
<code>*_fun</code>: the first input is a function from which to simulate data, fit the method, evaluate the metrics, or create a visualization (depending on <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code>).</li>
<li>
<code>name</code>: (optional) name of the component. Can be specified either here in <code>create_*()</code> or when creating the experiment as we will see later.</li>
<li>
<code>...</code>: additional arguments get passed into the <code>*_fun</code> above.</li>
</ul>
<div id="create-data-generating-process-dgp" class="section level2">
<h2 class="hasAnchor">
<a href="#create-data-generating-process-dgp" class="anchor"></a>Create data-generating process (DGP)</h2>
<p>As a toy DGP example, let us create a function to simulate a random Gaussian data matrix <span class="math inline">\(\mathbf{X}\)</span> of size <span class="math inline">\(n \times 2\)</span> and a linear response vector <span class="math inline">\(\mathbf{y}\)</span> of size <span class="math inline">\(n \times 1\)</span>, where</p>
<p><span class="math display">\[\begin{gather*}
\mathbf{X} \sim N\left(\mathbf{0}, \begin{pmatrix} 1 &amp; \rho \\ \rho &amp; 1 \end{pmatrix}\right), \\
\mathbf{y} = \mathbf{X} \boldsymbol{\beta} + \boldsymbol{\epsilon},\\
\boldsymbol{\epsilon} \sim N(\mathbf{0}, \sigma^2 \mathbf{I}_n)
\end{gather*}\]</span></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dgp_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, <span class="va">beta</span>, <span class="va">rho</span>, <span class="va">sigma</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">cov_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">rho</span>, <span class="va">rho</span>, <span class="fl">1</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">T</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">MASS</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MASS/man/mvrnorm.html">mvrnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, Sigma <span class="op">=</span> <span class="va">cov_mat</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="va">X</span> <span class="op">%*%</span> <span class="va">beta</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="va">sigma</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">X</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We can create an object of class <code><a href="../reference/DGP.html">DGP()</a></code> from this function via</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dgp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_dgp.html">create_dgp</a></span><span class="op">(</span>dgp_fun <span class="op">=</span> <span class="va">dgp_fun</span>, name <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span>,
                  <span class="co"># additional named parameters to pass to dgp_fun()</span>
                  n <span class="op">=</span> <span class="fl">200</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>, rho <span class="op">=</span> <span class="fl">0</span>, sigma <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p>Note that the additional arguments in <code><a href="../reference/create_dgp.html">create_dgp()</a></code> must be named arguments that match those in <code>dgp_fun</code>.</p>
</div>
<div id="create-method" class="section level2">
<h2 class="hasAnchor">
<a href="#create-method" class="anchor"></a>Create method</h2>
<p>Given the above DGP, suppose we want to investigate the performance of linear regression, specifically the p-values that are outputted for the non-intercept coefficients from <code><a href="https://rdrr.io/r/stats/summary.lm.html">summary.lm()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lm_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, <span class="va">cols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"X1"</span>, <span class="st">"X2"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">lm_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">X</span><span class="op">)</span>
  <span class="va">pvals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">lm_fit</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="va">cols</span>, <span class="st">"Pr(&gt;|t|)"</span><span class="op">]</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>, <span class="st">"p-value"</span><span class="op">)</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">pvals</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We can create an object of class <code><a href="../reference/Method.html">Method()</a></code> from this function via</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lm_method</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_method.html">create_method</a></span><span class="op">(</span>method_fun <span class="op">=</span> <span class="va">lm_fun</span><span class="op">)</span></code></pre></div>
<p>A couple notes here:</p>
<ul>
<li>The inputs into the method function <code>lm_fun</code> should include the named outputs from the DGP function <code>dgp_fun</code> (in this case, <code>X</code> and <code>y</code>), as the data generated from the DGP will be automatically passed into the Method.</li>
<li>Additional arguments can be passed into <code><a href="../reference/create_method.html">create_method()</a></code> as was done previously in <code><a href="../reference/create_dgp.html">create_dgp()</a></code>. However, this is not necessary in this case if we are happy with the default argument for <code>cols</code> in <code>lm_fun()</code>.</li>
</ul>
</div>
<div id="create-evaluator" class="section level2">
<h2 class="hasAnchor">
<a href="#create-evaluator" class="anchor"></a>Create evaluator</h2>
<p>To evaluate the performance of linear regression, one metric (or statistic) of interest could be the rejection probability at some level <span class="math inline">\(\alpha\)</span>, which we compute in the following function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reject_prob_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit_results</span>, <span class="va">alpha</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">group_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">".dgp_name"</span>, <span class="st">".method_name"</span><span class="op">)</span>
  <span class="va">eval_out</span> <span class="op">&lt;-</span> <span class="va">fit_results</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="op">{</span><span class="op">{</span><span class="va">group_vars</span><span class="op">}</span><span class="op">}</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>
      `X1 Reject Prob.` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">`X1 p-value`</span> <span class="op">&lt;</span> <span class="va">alpha</span><span class="op">)</span>,
      `X2 Reject Prob.` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">`X2 p-value`</span> <span class="op">&lt;</span> <span class="va">alpha</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">eval_out</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We can create an object of class <code><a href="../reference/Evaluator.html">Evaluator()</a></code> from this function via</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reject_prob_eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_evaluator.html">create_evaluator</a></span><span class="op">(</span>eval_fun <span class="op">=</span> <span class="va">reject_prob_fun</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></code></pre></div>
<p>There are a few key points to keep in mind when writing a custom Evaluator function such as <code>reject_prob_fun()</code>.</p>
<ul>
<li>First, the Evaluator function should almost always take in the named argument <code>fit_results</code>. <code>fit_results</code> is a placeholder for the tibble that will be outputted by <code>Experiment$fit()</code> and automatically passed in when the experiment is fitted. Note that this argument must be exactly named <code>fit_results</code> or else the Evaluator function will not receive the results from <code>Experiment$fit()</code>. We will see <code>Experiment$fit()</code> in action later, but for now, we can think of <code>fit_results</code> as a tibble containing the results of all (replicate, DGP, method) combinations fitted in the experiment. Naturally, <code>fit_results</code> will have columns named <code>.rep</code>, <code>.dgp_name</code>, <code>.method_name</code>, and any other named arguments that were outputted from the method function (i.e., <code>lm_fun</code>).</li>
<li>Many evaluation metrics are most naturally computed across replicates, so it is common to group the <code>fit_results</code> by <code>.dgp_name</code> and <code>.method_name</code> as seen in <code>reject_prob_fun()</code> above. In doing so, the rejection probability (across replicates) will be computed for each (DGP, Method) combination separately. However, depending on the goal of the Evaluator function, grouping by <code>.dgp_name</code> and <code>.method_name</code> might not be necessary.</li>
</ul>
<p>As before, additional arguments can be passed into <code><a href="../reference/create_evaluator.html">create_evaluator()</a></code>, and in this case, we have overwritten the default value of <code>alpha</code> with <code>alpha = 0.1</code>.</p>
</div>
<div id="create-visualizer" class="section level2">
<h2 class="hasAnchor">
<a href="#create-visualizer" class="anchor"></a>Create visualizer</h2>
<p>Lastly, we may want to plot the results from the <code>Method</code> fits (stored in <code>fit_results</code>) and/or the outputs from our <code>Evaluators</code> (stored in <code>eval_results</code>). For example, we could plot the power of the hypothesis test.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">power_plot_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit_results</span>, <span class="va">col</span> <span class="op">=</span> <span class="st">"X1"</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">plt</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">fit_results</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">col</span>, <span class="st">"p-value"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>,
                 color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">.method_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="fl">0</span>, 
                         color <span class="op">=</span> <span class="st">"darkgray"</span>, linetype <span class="op">=</span> <span class="st">"solid"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_ecdf.html">stat_ecdf</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"t"</span>, y <span class="op">=</span> <span class="st">"P( p-value \u2264 t )"</span>, 
                  linetype <span class="op">=</span> <span class="st">""</span>, color <span class="op">=</span> <span class="st">"Method"</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plt</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We can create an object of class <code><a href="../reference/Visualizer.html">Visualizer()</a></code> from this function via</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">power_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_visualizer.html">create_visualizer</a></span><span class="op">(</span>viz_fun <span class="op">=</span> <span class="va">power_plot_fun</span><span class="op">)</span></code></pre></div>
<p>Like the custom <code>Evaluator</code> functions, custom <code>Visualizer</code> functions such as <code>power_plot_fun()</code> can take in the argument <code>fit_results</code> if we want to construct a plot from the method fit outputs. If we want to construct a visualization using the output of our <code>Evaluators</code> (e.g., the output from <code>reject_prob_fun()</code>), the <code>Visualizer</code> function can also take the argument <code>eval_results</code> as input. Note again that the arguments must be exactly named <code>fit_results</code> and <code>eval_results</code> in order to work properly. Beyond creating plots, <code>Visualizers</code> can return tables and more generally, any R Markdown snippet containing results.</p>
<p>As with the other <code>create_*</code> functions, additional arguments that need to pass into the custom <code>Visualizer</code> function can be passed into <code><a href="../reference/create_visualizer.html">create_visualizer()</a></code>.</p>
</div>
</div>
<div id="assemble-simulation-experiment-recipe" class="section level1">
<h1 class="hasAnchor">
<a href="#assemble-simulation-experiment-recipe" class="anchor"></a>Assemble simulation experiment recipe</h1>
<p>At this point, we have created a <code>DGP</code> (<code>dgp</code>), <code>Method</code> (<code>lm_method</code>), <code>Evaluator</code> (<code>reject_prob_eval</code>), and <code>Visualizer</code> (<code>power_plot</code>). The next step is to create the simulation experiment recipe and <code>add</code> each component to the recipe via</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_experiment.html">create_experiment</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Linear Regression Experiment"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_dgp</a></span><span class="op">(</span><span class="va">dgp</span>, name <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_method</a></span><span class="op">(</span><span class="va">lm_method</span>, name <span class="op">=</span> <span class="st">"OLS"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_evaluator</a></span><span class="op">(</span><span class="va">reject_prob_eval</span>, name <span class="op">=</span> <span class="st">"Rejection Prob. (alpha = 0.1)"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_visualizer</a></span><span class="op">(</span><span class="va">power_plot</span>, name <span class="op">=</span> <span class="st">"Power"</span><span class="op">)</span></code></pre></div>
<p>Any number of DGPs, Methods, Evaluators, and Visualizers can be added to the simulation experiment recipe, but each added element to the experiment should have an intelligible name as this will be used in creating the R Markdown results report.</p>
<p>We can easily see the individual parts of the simulation experiment recipe by printing the experiment.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>
<span class="co">#&gt; Experiment Name: Linear Regression Experiment </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power </span>
<span class="co">#&gt;    Vary Across: None</span></code></pre></div>
<p>Once a DGP, Method, Evaluator, or Visualizer has been added to the simulation experiment recipe, the component can be updated using <code><a href="../reference/update_funs.html">update_dgp()</a></code>, <code><a href="../reference/update_funs.html">update_method()</a></code>, <code><a href="../reference/update_funs.html">update_evaluator()</a></code>, or <code><a href="../reference/update_funs.html">update_visualizer()</a></code> and removed using <code><a href="../reference/remove_funs.html">remove_dgp()</a></code>, <code><a href="../reference/remove_funs.html">remove_method()</a></code>, <code><a href="../reference/remove_funs.html">remove_evaluator()</a></code>, or <code><a href="../reference/remove_funs.html">remove_visualizer()</a></code>.</p>
</div>
<div id="run-the-experiment" class="section level1">
<h1 class="hasAnchor">
<a href="#run-the-experiment" class="anchor"></a>Run the experiment</h1>
<p>Thus far, we have only created the simulation experiment recipe and have not generated any results from the experiment. That is, we have only given the simulation experiment instructions on what to do. To run the experiment, say over 100 replicates, we can do so via</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Fitting Linear Regression Experiment...</span>
<span class="co">#&gt; 100 reps completed (totals: 100/100) | time taken: 0.025744 minutes</span>
<span class="co">#&gt; Saving fit results...</span>
<span class="co">#&gt; Fit results saved | time taken: 0.028862 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Evaluating Linear Regression Experiment...</span>
<span class="co">#&gt; `summarise()` has grouped output by '.dgp_name'. You can override using the `.groups` argument.</span>
<span class="co">#&gt; Evaluation completed | time taken: 0.000370 minutes</span>
<span class="co">#&gt; Saving eval results...</span>
<span class="co">#&gt; Eval results saved | time taken: 0.090633 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Visualizing Linear Regression Experiment...</span>
<span class="co">#&gt; Visualization completed | time taken: 0.002076 minutes</span>
<span class="co">#&gt; Saving viz results...</span>
<span class="co">#&gt; Viz results saved | time taken: 0.069476 seconds</span>
<span class="co">#&gt; ==============================</span></code></pre></div>
<p>or alternatively,</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/run_experiment.html">run_experiment</a></span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>The output of <code>experiment$run()</code> is a list of length three:</p>
<ul>
<li>
<code>fit_results</code>: output of <code>Method</code> fits (see <code>experiment$fit()</code>)</li>
<li>
<code>eval_results</code>: output of <code>Evaluators</code> (see <code>experiment$evaluate()</code>)</li>
<li>
<code>viz_results</code>: output of <code>Visualizers</code> (see <code>experiment$visualize()</code>)</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">results</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ fit_results : tibble [100 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ eval_results:List of 1</span>
<span class="co">#&gt;   ..$ Rejection Prob. (alpha = 0.1): tibble [1 × 4] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ viz_results :List of 1</span>
<span class="co">#&gt;   ..$ Power:List of 9</span>
<span class="co">#&gt;   .. ..- attr(*, "class")= chr [1:2] "gg" "ggplot"</span>
<span class="va">results</span><span class="op">$</span><span class="va">fit_results</span>
<span class="co">#&gt; # A tibble: 100 × 5</span>
<span class="co">#&gt;    .rep  .dgp_name           .method_name `X1 p-value` `X2 p-value`</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;               &lt;chr&gt;               &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1 1     Linear Gaussian DGP OLS              4.90e-29       0.704 </span>
<span class="co">#&gt;  2 2     Linear Gaussian DGP OLS              4.28e-28       0.713 </span>
<span class="co">#&gt;  3 3     Linear Gaussian DGP OLS              1.60e-38       0.680 </span>
<span class="co">#&gt;  4 4     Linear Gaussian DGP OLS              2.31e-29       0.0115</span>
<span class="co">#&gt;  5 5     Linear Gaussian DGP OLS              8.08e-33       0.127 </span>
<span class="co">#&gt;  6 6     Linear Gaussian DGP OLS              8.95e-29       0.980 </span>
<span class="co">#&gt;  7 7     Linear Gaussian DGP OLS              6.84e-33       0.385 </span>
<span class="co">#&gt;  8 8     Linear Gaussian DGP OLS              6.60e-29       0.116 </span>
<span class="co">#&gt;  9 9     Linear Gaussian DGP OLS              4.16e-28       0.765 </span>
<span class="co">#&gt; 10 10    Linear Gaussian DGP OLS              1.28e-21       0.530 </span>
<span class="co">#&gt; # … with 90 more rows</span>
<span class="va">results</span><span class="op">$</span><span class="va">eval_results</span>
<span class="co">#&gt; $`Rejection Prob. (alpha = 0.1)`</span>
<span class="co">#&gt; # A tibble: 1 × 4</span>
<span class="co">#&gt;   .dgp_name           .method_name `X1 Reject Prob.` `X2 Reject Prob.`</span>
<span class="co">#&gt;   &lt;chr&gt;               &lt;chr&gt;                    &lt;dbl&gt;             &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Linear Gaussian DGP OLS                          1              0.12</span>
<span class="va">results</span><span class="op">$</span><span class="va">viz_results</span>
<span class="co">#&gt; $Power</span></code></pre></div>
<p><img src="simChef_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>By default, the results are not saved to disk. However, to generate the R Markdown report, we will need to save the results to disk and hence set <code>save = TRUE</code> above.</p>
<p>The experiment can also be run in parallel. For a more detailed walkthrough on how to parallelize the experiment, please see <code><a href="../articles/parallel.html">vignette("parallel")</a></code>.</p>
</div>
<div id="document-and-visualize-results" class="section level1">
<h1 class="hasAnchor">
<a href="#document-and-visualize-results" class="anchor"></a>Document and visualize results</h1>
<p>Finally, we can easily visualize all results from the simulation experiment in an html file (generated using R Markdown) or browser.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_rmd.html">create_rmd</a></span><span class="op">(</span><span class="va">experiment</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; Creating R Markdown report for Linear Regression Experiment...</span></code></pre></div>
<p>The results can be found <a href="linear_regression_base_output.html">here</a>.</p>
<p>Note that in the first run of <code><a href="../reference/create_rmd.html">create_rmd(experiment)</a></code>, a documentation template (i.e., a series of blank .md files) is created for the user to fill out with descriptions of the simulation experiment and its recipe components. These blank .md files can be found in the experiment’s root results directory under docs/. To find the experiment’s root results directory, use <code>experiment$get_save_dir()</code>.</p>
</div>
<div id="advanced-usage" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-usage" class="anchor"></a>Advanced usage</h1>
<div id="run-experiment-across-varying-parameters-in-the-dgpmethod" class="section level2">
<h2 class="hasAnchor">
<a href="#run-experiment-across-varying-parameters-in-the-dgpmethod" class="anchor"></a>Run experiment across varying parameters in the DGP/Method</h2>
<p>In many situations, it is helpful to understand how a method’s performance is affected as we vary a single parameter in the DGP across different values. For instance, what happens to the power as the amount of noise in the linear model increases?</p>
<p>Using the simple grammar of <code>simChef</code>, we can investigate this question by adding a “vary across” component to the simulation experiment.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span>, sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>
<span class="co">#&gt; Experiment Name: Linear Regression Experiment </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power </span>
<span class="co">#&gt;    Vary Across: </span>
<span class="co">#&gt;       DGP: Linear Gaussian DGP </span>
<span class="co">#&gt;          sigma:  num [1:4] 1 2 4 8</span></code></pre></div>
<p>In <code><a href="../reference/vary_across.html">add_vary_across()</a></code>, the <code>dgp</code> argument is the name of the DGP to vary or the DGP object itself. All subsequent arguments should be of the form <code>[param_name] = [param_values]</code>, where <code>param_name</code> is the name of the argument/parameter in the <code>DGP</code> function that will be varied, and <code>param_values</code> is a list or atomic vector of values that <code>param_name</code> will take and vary across while all other arguments are kept constant at their base value (see <code>dgp$dgp_params</code>). Here, we are varying the <code>sigma</code> parameter (i.e., the SD of the additive noise term) over values of 1, 2, 4, and 8 within the Linear Gaussian DGP. (Note: we can also vary across parameters in a <code>Method</code> by inputting the <code>method</code> argument instead of the <code>dgp</code> argument in <code><a href="../reference/vary_across.html">add_vary_across()</a></code>.)</p>
<p>However, when we run the experiment, the results are not quite what we expect. The results are summarized/aggregated across all values of <code>sigma</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vary_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Fitting Linear Regression Experiment...</span>
<span class="co">#&gt; 100 reps completed (totals: 100/100) | time taken: 0.067384 minutes</span>
<span class="co">#&gt; Saving fit results...</span>
<span class="co">#&gt; Fit results saved | time taken: 0.044220 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Evaluating Linear Regression Experiment...</span>
<span class="co">#&gt; Evaluation completed | time taken: 0.000445 minutes</span>
<span class="co">#&gt; Saving eval results...</span>
<span class="co">#&gt; Eval results saved | time taken: 0.043989 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Visualizing Linear Regression Experiment...</span>
<span class="co">#&gt; Visualization completed | time taken: 0.000306 minutes</span>
<span class="co">#&gt; Saving viz results...</span>
<span class="co">#&gt; Viz results saved | time taken: 0.092861 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="va">vary_results</span><span class="op">$</span><span class="va">eval_results</span>
<span class="co">#&gt; $`Rejection Prob. (alpha = 0.1)`</span>
<span class="co">#&gt; # A tibble: 1 × 4</span>
<span class="co">#&gt;   .dgp_name           .method_name `X1 Reject Prob.` `X2 Reject Prob.`</span>
<span class="co">#&gt;   &lt;chr&gt;               &lt;chr&gt;                    &lt;dbl&gt;             &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Linear Gaussian DGP OLS                      0.875             0.112</span>
<span class="va">vary_results</span><span class="op">$</span><span class="va">viz_results</span>
<span class="co">#&gt; $Power</span></code></pre></div>
<p><img src="simChef_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>To see how different values of <code>sigma</code> affect the experiment results, we need to modify our <code>Evaluator</code> and <code>Visualizer</code> functions. Specifically, in <code>reject_prob_eval</code>, we want to group <code>fit_results</code> by <code>sigma</code> in addition to <code>.dgp_name</code> and <code>.method_name</code>. To do this, we need to add a <code>vary_params</code> argument to our custom <code>Evaluator</code> function. When we run the experiment, <code>vary_params</code> will be auto-filled by a vector of the parameter names that are varied (i.e., those that have been added via <code><a href="../reference/vary_across.html">add_vary_across()</a></code>). In this case, <code>vary_params</code> will be auto-filled by <code><a href="https://rdrr.io/r/base/c.html">c("sigma")</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reject_prob_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit_results</span>, <span class="va">vary_params</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">alpha</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">group_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">".dgp_name"</span>, <span class="st">".method_name"</span>, <span class="va">vary_params</span><span class="op">)</span>
  <span class="va">eval_out</span> <span class="op">&lt;-</span> <span class="va">fit_results</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="op">{</span><span class="op">{</span><span class="va">group_vars</span><span class="op">}</span><span class="op">}</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>
      `X1 Reject Prob.` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">`X1 p-value`</span> <span class="op">&lt;</span> <span class="va">alpha</span><span class="op">)</span>,
      `X2 Reject Prob.` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">`X2 p-value`</span> <span class="op">&lt;</span> <span class="va">alpha</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">eval_out</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">reject_prob_eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_evaluator.html">create_evaluator</a></span><span class="op">(</span>eval_fun <span class="op">=</span> <span class="va">reject_prob_fun</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></code></pre></div>
<p>Similarly in <code>power_plot_fun</code>, we need to add a <code>vary_params</code> argument to plot the results across different values of <code>sigma</code>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">power_plot_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit_results</span>, <span class="va">vary_params</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">col</span> <span class="op">=</span> <span class="st">"X1"</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">vary_params</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># deal with the case when we vary across a parameter that is vector-valued</span>
    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">is.list</a></span><span class="op">(</span><span class="va">fit_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">fit_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_col_to_chr.html">list_col_to_chr</a></span><span class="op">(</span><span class="va">fit_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span>,
                                                    name <span class="op">=</span> <span class="va">vary_params</span>,
                                                    verbatim <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
    <span class="op">}</span>
  <span class="op">}</span>
  
  <span class="va">plt</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">fit_results</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">col</span>, <span class="st">"p-value"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>,
                 color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">.method_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="fl">0</span>, 
                         color <span class="op">=</span> <span class="st">"darkgray"</span>, linetype <span class="op">=</span> <span class="st">"solid"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_ecdf.html">stat_ecdf</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"t"</span>, y <span class="op">=</span> <span class="st">"P( p-value \u2264 t )"</span>, 
                  linetype <span class="op">=</span> <span class="st">""</span>, color <span class="op">=</span> <span class="st">"Method"</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">vary_params</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">plt</span> <span class="op">&lt;-</span> <span class="va">plt</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.data</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
  <span class="op">}</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plt</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">power_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_visualizer.html">create_visualizer</a></span><span class="op">(</span>viz_fun <span class="op">=</span> <span class="va">power_plot_fun</span><span class="op">)</span></code></pre></div>
<p>Here, we have also added a pre-processing step to deal with the potential case when we vary across a <em>list</em> of parameter values. This pre-processing step uses a helper function, <code><a href="../reference/list_col_to_chr.html">list_col_to_chr()</a></code>, to convert a list-type tibble column to a character-type tibble column that is amenable for plotting (unlike the list-type column).</p>
<p>Now, we are ready to update our experiment and run the experiment via</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vary_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/update_funs.html">update_evaluator</a></span><span class="op">(</span><span class="va">reject_prob_eval</span>, name <span class="op">=</span> <span class="st">"Rejection Prob. (alpha = 0.1)"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/update_funs.html">update_visualizer</a></span><span class="op">(</span><span class="va">power_plot</span>, name <span class="op">=</span> <span class="st">"Power"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/run_experiment.html">run_experiment</a></span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Fitting Linear Regression Experiment...</span>
<span class="co">#&gt; 100 reps completed (totals: 100/100) | time taken: 0.070092 minutes</span>
<span class="co">#&gt; Saving fit results...</span>
<span class="co">#&gt; Fit results saved | time taken: 0.062462 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Evaluating Linear Regression Experiment...</span>
<span class="co">#&gt; Evaluation completed | time taken: 0.000222 minutes</span>
<span class="co">#&gt; Saving eval results...</span>
<span class="co">#&gt; Eval results saved | time taken: 0.048107 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Visualizing Linear Regression Experiment...</span>
<span class="co">#&gt; Visualization completed | time taken: 0.000952 minutes</span>
<span class="co">#&gt; Saving viz results...</span>
<span class="co">#&gt; Viz results saved | time taken: 0.109945 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="va">vary_results</span><span class="op">$</span><span class="va">eval_results</span>
<span class="co">#&gt; $`Rejection Prob. (alpha = 0.1)`</span>
<span class="co">#&gt; # A tibble: 4 × 5</span>
<span class="co">#&gt;   .dgp_name           .method_name sigma `X1 Reject Prob.` `X2 Reject Prob.`</span>
<span class="co">#&gt;   &lt;chr&gt;               &lt;chr&gt;        &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Linear Gaussian DGP OLS              1              1                 0.08</span>
<span class="co">#&gt; 2 Linear Gaussian DGP OLS              2              1                 0.12</span>
<span class="co">#&gt; 3 Linear Gaussian DGP OLS              4              0.98              0.08</span>
<span class="co">#&gt; 4 Linear Gaussian DGP OLS              8              0.58              0.11</span>
<span class="va">vary_results</span><span class="op">$</span><span class="va">viz_results</span>
<span class="co">#&gt; $Power</span></code></pre></div>
<p><img src="simChef_files/figure-html/unnamed-chunk-24-1.png" width="700"></p>
<p>Note here we need to use <code>update_*</code> instead of <code>add_*</code> since an <code>Evaluator</code> named “Rejection Prob. (alpha = 0.1)” and a <code>Visualizer</code> named “Power” already exist in the <code>Experiment</code>. Using <code>add_*</code> will throw an error.</p>
<p>For fun, let’s add another plot (in fact, an interactive plot using <code><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">plotly::ggplotly</a></code>) to our <code>Experiment</code> and run the <code>Experiment</code> across various values of the coefficient <span class="math inline">\(\boldsymbol{\beta}_2\)</span> and the correlation <span class="math inline">\(\rho\)</span> between features in <span class="math inline">\(\mathbf{X}\)</span>. (Note: the visualizer function below (<code>reject_prob_plot_fun</code>) takes in the <code>Evaluator</code> results, stored as <code>eval_results</code>, and plots the rejection probability for the <span class="math inline">\(\boldsymbol{\beta}_1\)</span> at <span class="math inline">\(\alpha = 0.1\)</span>.)</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create rejection probability plot</span>
<span class="va">reject_prob_plot_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">eval_results</span>, <span class="va">vary_params</span> <span class="op">=</span> <span class="cn">NULL</span>, 
                                 <span class="va">alpha</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">eval_results</span> <span class="op">&lt;-</span> <span class="va">eval_results</span><span class="op">$</span><span class="va">`Rejection Prob. (alpha = 0.1)`</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">is.list</a></span><span class="op">(</span><span class="va">eval_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># deal with the case when we vary across a parameter that is vector-valued</span>
    <span class="va">eval_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_col_to_chr.html">list_col_to_chr</a></span><span class="op">(</span><span class="va">eval_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span>,
                                                   name <span class="op">=</span> <span class="va">vary_params</span>,
                                                   verbatim <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="op">}</span>
  <span class="va">plt</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">eval_results</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">`X1 Reject Prob.`</span>, 
                 color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">.method_name</span><span class="op">)</span>, 
                 fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">.method_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">vary_params</span>, 
                  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"Rejection Probability (alpha = %s)"</span>, <span class="va">alpha</span><span class="op">)</span>,
                  color <span class="op">=</span> <span class="st">"Method"</span>, fill <span class="op">=</span> <span class="st">"Method"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">eval_results</span><span class="op">[[</span><span class="va">vary_params</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">plt</span> <span class="op">&lt;-</span> <span class="va">plt</span> <span class="op">+</span>
      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">plt</span> <span class="op">&lt;-</span> <span class="va">plt</span> <span class="op">+</span>
      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span>
  <span class="op">}</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">plt</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">reject_prob_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_visualizer.html">create_visualizer</a></span><span class="op">(</span>viz_fun <span class="op">=</span> <span class="va">reject_prob_plot_fun</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>

<span class="va">experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_visualizer</a></span><span class="op">(</span><span class="va">reject_prob_plot</span>, name <span class="op">=</span> <span class="st">"Rejection Prob. (alpha = 0.1) Plot"</span><span class="op">)</span>

<span class="co"># run experiment across values of beta_2</span>
<span class="va">vary_beta2_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">remove_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span>,
                  beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,
                              <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span>,
                              <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
                              <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.5</span><span class="op">)</span>,
                              <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/run_experiment.html">run_experiment</a></span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Fitting Linear Regression Experiment...</span>
<span class="co">#&gt; 100 reps completed (totals: 100/100) | time taken: 0.157631 minutes</span>
<span class="co">#&gt; Saving fit results...</span>
<span class="co">#&gt; Fit results saved | time taken: 0.058657 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Evaluating Linear Regression Experiment...</span>
<span class="co">#&gt; Evaluation completed | time taken: 0.000332 minutes</span>
<span class="co">#&gt; Saving eval results...</span>
<span class="co">#&gt; Eval results saved | time taken: 0.050959 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Visualizing Linear Regression Experiment...</span>
<span class="co">#&gt; Visualization completed | time taken: 0.003545 minutes</span>
<span class="co">#&gt; Saving viz results...</span>
<span class="co">#&gt; Viz results saved | time taken: 0.152266 seconds</span>
<span class="co">#&gt; ==============================</span>

<span class="co"># run experiment across values of rho (correlation)</span>
<span class="va">vary_cor_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">remove_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span>, 
                  rho <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/run_experiment.html">run_experiment</a></span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span>, save <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Fitting Linear Regression Experiment...</span>
<span class="co">#&gt; 100 reps completed (totals: 100/100) | time taken: 0.065929 minutes</span>
<span class="co">#&gt; Saving fit results...</span>
<span class="co">#&gt; Fit results saved | time taken: 0.052427 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Evaluating Linear Regression Experiment...</span>
<span class="co">#&gt; Evaluation completed | time taken: 0.000221 minutes</span>
<span class="co">#&gt; Saving eval results...</span>
<span class="co">#&gt; Eval results saved | time taken: 0.051100 seconds</span>
<span class="co">#&gt; ==============================</span>
<span class="co">#&gt; Visualizing Linear Regression Experiment...</span>
<span class="co">#&gt; Visualization completed | time taken: 0.002002 minutes</span>
<span class="co">#&gt; Saving viz results...</span>
<span class="co">#&gt; Viz results saved | time taken: 0.161082 seconds</span>
<span class="co">#&gt; ==============================</span></code></pre></div>
</div>
<div id="experiment-as-an-r6-class" class="section level2">
<h2 class="hasAnchor">
<a href="#experiment-as-an-r6-class" class="anchor"></a>Experiment as an R6 Class</h2>
<p>Since the <code><a href="../reference/Experiment.html">Experiment()</a></code> class is an <code>R6</code>, we need to be careful about clones versus pointers. In the following, it may look like the <code>vary_experiment</code> object has a <code>vary_across</code> component while the <code>experiment</code> object does not have a <code>vary_across</code> component. However, when <code>experiment</code> is piped into <code><a href="../reference/vary_across.html">add_vary_across()</a></code>, this is in itself modifying <code>experiment</code>, and <code>vary_experiment</code> is simply pointing to this modified <code>experiment</code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">remove_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span><span class="op">)</span>
<span class="va">experiment</span>
<span class="co">#&gt; Experiment Name: Linear Regression Experiment </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power, Rejection Prob. (alpha = 0.1) Plot </span>
<span class="co">#&gt;    Vary Across: None</span>
<span class="va">vary_experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span>, sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="va">vary_experiment</span>, <span class="va">experiment</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span> <span class="op">==</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">vary_experiment</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="va">experiment</span>
<span class="co">#&gt; Experiment Name: Linear Regression Experiment </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power, Rejection Prob. (alpha = 0.1) Plot </span>
<span class="co">#&gt;    Vary Across: </span>
<span class="co">#&gt;       DGP: Linear Gaussian DGP </span>
<span class="co">#&gt;          sigma:  num [1:4] 1 2 4 8</span></code></pre></div>
</div>
<div id="creating-an-experiment-from-another-experiment" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-an-experiment-from-another-experiment" class="anchor"></a>Creating an experiment from another experiment</h2>
<p>To modify <code>vary_experiment</code> without making changes to <code>experiment</code>, we need to create a new experiment by explicitly <em>cloning</em> from the old experiment.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vary_experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_experiment.html">create_experiment</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"I am a clone"</span>,
                                     clone_from <span class="op">=</span> <span class="va">experiment</span><span class="op">)</span>
<span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span> <span class="op">==</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">vary_experiment</span><span class="op">)</span>
<span class="co">#&gt; [1] FALSE</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vary_experiment</span>
<span class="co">#&gt; Experiment Name: I am a clone </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power, Rejection Prob. (alpha = 0.1) Plot </span>
<span class="co">#&gt;    Vary Across: None</span></code></pre></div>
<p>When creating an <code>Experiment</code> from a clone, we are making a deep clone of the parent experiment’s <code>DGPs</code>, <code>Methods</code>, <code>Evaluators</code>, and <code>Visualizers</code>, but not the <code>vary_across</code> component. We thus need to add a <code>vary_across</code> component to <code>vary_experiment</code> using <code><a href="../reference/vary_across.html">add_vary_across()</a></code>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># this works without an error</span>
<span class="va">vary_experiment</span> <span class="op">&lt;-</span> <span class="va">vary_experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/vary_across.html">add_vary_across</a></span><span class="op">(</span>dgp <span class="op">=</span> <span class="st">"Linear Gaussian DGP"</span>, sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We can also add/update DGPs, Methods, Evaluators, and Visualizers to the cloned experiment without modifying the parent <code>experiment</code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add DGP</span>
<span class="va">dgp_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_dgp.html">create_dgp</a></span><span class="op">(</span>dgp_fun <span class="op">=</span> <span class="va">dgp_fun</span>, name <span class="op">=</span> <span class="st">"Linear Gaussian DGP (large n)"</span>,
                      n <span class="op">=</span> <span class="fl">500</span>, beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>, rho <span class="op">=</span> <span class="fl">0</span>, sigma <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">vary_experiment</span> <span class="op">&lt;-</span> <span class="va">vary_experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_funs.html">add_dgp</a></span><span class="op">(</span><span class="va">dgp_new</span>, <span class="st">"Linear Gaussian DGP (large n)"</span><span class="op">)</span>
<span class="va">vary_experiment</span>
<span class="co">#&gt; Experiment Name: I am a clone </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP, Linear Gaussian DGP (large n) </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power, Rejection Prob. (alpha = 0.1) Plot </span>
<span class="co">#&gt;    Vary Across: </span>
<span class="co">#&gt;       DGP: Linear Gaussian DGP </span>
<span class="co">#&gt;          sigma:  num [1:4] 1 2 4 8</span>
<span class="va">experiment</span>
<span class="co">#&gt; Experiment Name: Linear Regression Experiment </span>
<span class="co">#&gt;    Saved results at: results/Linear Regression Experiment </span>
<span class="co">#&gt;    DGPs: Linear Gaussian DGP </span>
<span class="co">#&gt;    Methods: OLS </span>
<span class="co">#&gt;    Evaluators: Rejection Prob. (alpha = 0.1) </span>
<span class="co">#&gt;    Visualizers: Power, Rejection Prob. (alpha = 0.1) Plot </span>
<span class="co">#&gt;    Vary Across: </span>
<span class="co">#&gt;       DGP: Linear Gaussian DGP </span>
<span class="co">#&gt;          sigma:  num [1:4] 1 2 4 8</span></code></pre></div>
</div>
<div id="additional-r-markdown-notes-and-options" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-r-markdown-notes-and-options" class="anchor"></a>Additional R Markdown notes and options</h2>
<p>When generating the R Markdown report summary for an <code>Experiment</code>, the R Markdown will compile results (both evaluation and visualization results) from all saved <code>Experiments</code> under the root results directory <code>experiment$get_save_dir()</code>. Since the results from the many <code>vary_across</code> runs above are all saved under the original <code>experiment</code>’s results directory, then the following will include all of these results in a single document.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_rmd.html">create_rmd</a></span><span class="op">(</span><span class="va">experiment</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; Creating R Markdown report for Linear Regression Experiment...</span>
<span class="co">#&gt; *Linear Gaussian DGP</span>
<span class="co">#&gt; **Varying beta</span>
<span class="co">#&gt;    Rejection Prob. (alpha = 0.1)</span>
<span class="co">#&gt;    Power</span>
<span class="co">#&gt;    Rejection Prob. (alpha = 0.1) Plot</span>
<span class="co">#&gt; **Varying rho</span>
<span class="co">#&gt;    Rejection Prob. (alpha = 0.1)</span>
<span class="co">#&gt;    Power</span>
<span class="co">#&gt;    Rejection Prob. (alpha = 0.1) Plot</span>
<span class="co">#&gt; **Varying sigma</span>
<span class="co">#&gt;    Rejection Prob. (alpha = 0.1)</span>
<span class="co">#&gt;    Power</span></code></pre></div>
<p>We can also create the R Markdown report summary by directly specifying the experiment’s root results directory.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_rmd.html">create_rmd</a></span><span class="op">(</span>save_dir <span class="op">=</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">get_save_dir</span><span class="op">(</span><span class="op">)</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>The results can be found <a href="linear_regression_output.html">here</a>.</p>
<p>In addition to showing all results under the root results directory, <code><a href="../reference/create_rmd.html">create_rmd()</a></code> will automatically generate a blank documentation template for every <code><a href="../reference/DGP.html">DGP()</a></code>, <code><a href="../reference/Method.html">Method()</a></code>, <code><a href="../reference/Evaluator.html">Evaluator()</a></code>, and <code>Plot()</code> found in any one of the <code>Experiments</code> under the root results directory. If one would like to generate the documentation template but not create the R Markdown report, see <code><a href="../reference/create_doc_template.html">create_doc_template()</a></code>.</p>
<p>There are also several customizable options regarding the aesthetics of the R Markdown output. These can be modified using the <code>rmd_options</code> argument in <code><a href="../reference/create_evaluator.html">create_evaluator()</a></code> and <code><a href="../reference/create_visualizer.html">create_visualizer()</a></code>. For example, we can customize the height and width of the Power plot via</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">power_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_visualizer.html">create_visualizer</a></span><span class="op">(</span>viz_fun <span class="op">=</span> <span class="va">power_plot_fun</span>, 
                                rmd_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>height <span class="op">=</span> <span class="fl">10</span>, width <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span>
<span class="va">experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/update_funs.html">update_visualizer</a></span><span class="op">(</span><span class="va">power_plot</span>, <span class="st">"Power"</span><span class="op">)</span></code></pre></div>
<p>and the number of digits in the evaluation table outputs via</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reject_prob_eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_evaluator.html">create_evaluator</a></span><span class="op">(</span>eval_fun <span class="op">=</span> <span class="va">reject_prob_fun</span>, alpha <span class="op">=</span> <span class="fl">0.1</span>,
                                     rmd_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/update_funs.html">update_evaluator</a></span><span class="op">(</span><span class="va">reject_prob_eval</span>, <span class="st">"Rejection Prob. (alpha = 0.1)"</span><span class="op">)</span></code></pre></div>
<p>Alternatively, <code><a href="../reference/set_rmd_options.html">set_rmd_options()</a></code> can be used to update the R Markdown option for an existing object, rather than having to recreate the <code><a href="../reference/Evaluator.html">Evaluator()</a></code> or <code><a href="../reference/Visualizer.html">Visualizer()</a></code> from scratch, e.g.,</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="va">experiment</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/set_rmd_options.html">set_rmd_options</a></span><span class="op">(</span>field_name <span class="op">=</span> <span class="st">"visualizer"</span>, name <span class="op">=</span> <span class="st">"Power"</span>, show <span class="op">=</span> <span class="cn">TRUE</span>,
                  height <span class="op">=</span> <span class="fl">10</span>, width <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></code></pre></div>
<p>To hide the output of an <code><a href="../reference/Evaluator.html">Evaluator()</a></code> or <code><a href="../reference/Visualizer.html">Visualizer()</a></code> in the R Markdown report, set <code>show = FALSE</code> in <code><a href="../reference/set_rmd_options.html">set_rmd_options()</a></code> or <code>create_*</code>.</p>
</div>
<div id="saving-results" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-results" class="anchor"></a>Saving results</h2>
<p>Since the R Markdown report heavily relies on the results file structure to organize the report summary, it may be helpful to understand the default saving structure utilized in <code>simChef</code>.</p>
<p>By default, the root results directory is ./results/{EXPERIMENT_NAME}. If the experiment was created by cloning another experiment, then the default results directory is the same as the parent experiment. To change the root results directory, one can specify the desired directory via the <code>save_dir</code> argument in <code><a href="../reference/create_experiment.html">create_experiment()</a></code> or use the <code><a href="../reference/set_save_dir.html">set_save_dir()</a></code> helper function.</p>
<p>All results from <code>experiment$run(..., save = TRUE)</code> without a <code>vary_across</code> component are then saved under the root results directory. If <code>experiment</code> has a <code>vary_across</code> component, then the results of <code>experiment$run(..., save = TRUE)</code> are saved under ./{ROOT_RESULTS_DIR}/{DGP_OR_METHOD_NAME}/Varying {PARAM_NAME}/.</p>
<p>For a concrete example of the saving structure, please refer to <a href="https://github.com/Yu-Group/simChef/tree/main/vignettes/results/Linear%20Regression%20Experiment/">this GitHub directory</a>, where we have stored all saved results from this vignette.</p>
</div>
<div id="additional-handling-of-the-experiment" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-handling-of-the-experiment" class="anchor"></a>Additional handling of the experiment</h2>
<p><code>Experiment$run()</code> is the easiest and most concise way of running the simulation experiment from start to finish. However, when debugging and developing the simulation experiment, it may be helpful to run only parts of the experiment so as to not repeat time-consuming, redundant computations. We split up the experimental run into the following three parts:</p>
<ol style="list-style-type: decimal">
<li>
<code>experiment$fit()</code>: fit the Method(s) in the experiment on multiple replicates of the DGP(s) and return the results from the fits</li>
<li>
<code>experiment$evaluate()</code>: evaluate the experiment through the Evaluator(s) and return the evaluation results</li>
<li>
<code>experiment$visualize()</code>: create visualizations of the fit/evaluation results from the experiment using the Visualizer(s) and return the visualization results</li>
</ol>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">fit</span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="co">#&gt; Fitting Linear Regression Experiment...</span>
<span class="co">#&gt; 100 reps completed (totals: 100/100) | time taken: 0.069293 minutes</span>
<span class="co">#&gt; ==============================</span>
<span class="va">eval_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">evaluate</span><span class="op">(</span><span class="va">fit_results</span><span class="op">)</span>
<span class="co">#&gt; Evaluating Linear Regression Experiment...</span>
<span class="co">#&gt; Evaluation completed | time taken: 0.000202 minutes</span>
<span class="co">#&gt; ==============================</span>
<span class="va">viz_results</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">visualize</span><span class="op">(</span><span class="va">fit_results</span>, <span class="va">eval_results</span><span class="op">)</span>
<span class="co">#&gt; Visualizing Linear Regression Experiment...</span>
<span class="co">#&gt; Visualization completed | time taken: 0.002177 minutes</span>
<span class="co">#&gt; ==============================</span></code></pre></div>
<p>or alternatively,</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit_experiment.html">fit_experiment</a></span><span class="op">(</span><span class="va">experiment</span>, n_reps <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="va">eval_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evaluate_experiment.html">evaluate_experiment</a></span><span class="op">(</span><span class="va">experiment</span>, <span class="va">fit_results</span><span class="op">)</span>
<span class="va">viz_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/visualize_experiment.html">visualize_experiment</a></span><span class="op">(</span><span class="va">experiment</span>, <span class="va">fit_results</span>, <span class="va">eval_results</span><span class="op">)</span></code></pre></div>
<p><code>Experiment$run()</code> is simply a wrapper around these three functions: <code>fit()</code>, <code>evaluate()</code>, and <code>visualize()</code>.</p>
<p>If the results have been saved to disk previously, and one would like to read in these saved results instead of re-running the experiment, the <code>use_cached</code> argument should be set to <code>TRUE</code>. If <code>use_cached = TRUE</code> but the experiment’s results have not yet been saved to disk, then the experiment will proceed to run per usual.</p>
<p>Thus far, we have neither stored nor returned any data from the <code>DGPs</code> since these can be large objects that require high memory loads when <code>n_reps</code> is large. However, one can generate small samples of data from the <code>DGPs</code> in the experiment via</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="va">experiment</span><span class="op">$</span><span class="fu">generate_data</span><span class="op">(</span>n_reps <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span>
<span class="co">#&gt; List of 1</span>
<span class="co">#&gt;  $ Linear Gaussian DGP:List of 4</span>
<span class="co">#&gt;   ..$ :List of 1</span>
<span class="co">#&gt;   .. ..$ :List of 2</span>
<span class="co">#&gt;   .. .. ..$ X: num [1:200, 1:2] 1.7417 -0.6452 -0.0971 0.0767 -0.992 ...</span>
<span class="co">#&gt;   .. .. .. ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. ..$ y: num [1:200, 1] 1.657 -1.08 -1.302 -0.944 -1.963 ...</span>
<span class="co">#&gt;   .. ..- attr(*, "params")=List of 1</span>
<span class="co">#&gt;   .. .. ..$ sigma: num 1</span>
<span class="co">#&gt;   ..$ :List of 1</span>
<span class="co">#&gt;   .. ..$ :List of 2</span>
<span class="co">#&gt;   .. .. ..$ X: num [1:200, 1:2] -1.149 1.622 -1.126 -0.59 0.741 ...</span>
<span class="co">#&gt;   .. .. .. ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. ..$ y: num [1:200, 1] -1.293 -0.44 0.215 -1.313 0.182 ...</span>
<span class="co">#&gt;   .. ..- attr(*, "params")=List of 1</span>
<span class="co">#&gt;   .. .. ..$ sigma: num 2</span>
<span class="co">#&gt;   ..$ :List of 1</span>
<span class="co">#&gt;   .. ..$ :List of 2</span>
<span class="co">#&gt;   .. .. ..$ X: num [1:200, 1:2] -0.7113 0.0915 0.1169 1.1258 -1.1399 ...</span>
<span class="co">#&gt;   .. .. .. ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. ..$ y: num [1:200, 1] 1.128 -1.868 0.419 8.815 -0.629 ...</span>
<span class="co">#&gt;   .. ..- attr(*, "params")=List of 1</span>
<span class="co">#&gt;   .. .. ..$ sigma: num 4</span>
<span class="co">#&gt;   ..$ :List of 1</span>
<span class="co">#&gt;   .. ..$ :List of 2</span>
<span class="co">#&gt;   .. .. ..$ X: num [1:200, 1:2] -1.924 1.255 1.197 1.495 -0.713 ...</span>
<span class="co">#&gt;   .. .. .. ..- attr(*, "dimnames")=List of 2</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. .. .. ..$ : NULL</span>
<span class="co">#&gt;   .. .. ..$ y: num [1:200, 1] 4.59 5.61 11.34 -3.71 8.32 ...</span>
<span class="co">#&gt;   .. ..- attr(*, "params")=List of 1</span>
<span class="co">#&gt;   .. .. ..$ sigma: num 8</span></code></pre></div>
<p>or alternatively,</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_data.html">generate_data</a></span><span class="op">(</span><span class="va">experiment</span>, n_reps <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p>This might be helpful for exploratory data analysis or further diagnosis of the experiment results.</p>
<p>Other helpful methods for handling the experiment include the <code>get_*</code> family of methods, i.e.,</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_funs.html">get_dgps</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>         <span class="co"># or `experiment$get_dgps`</span>
<span class="co">#&gt; $`Linear Gaussian DGP`</span>
<span class="co">#&gt; DGP Name: Linear Gaussian DGP </span>
<span class="co">#&gt;    Function: function (n, beta, rho, sigma)  </span>
<span class="co">#&gt;    Parameters: List of 4</span>
<span class="co">#&gt;      $ n    : num 200</span>
<span class="co">#&gt;      $ beta : num [1:2] 1 0</span>
<span class="co">#&gt;      $ rho  : num 0</span>
<span class="co">#&gt;      $ sigma: num 1</span>
<span class="fu"><a href="../reference/get_funs.html">get_methods</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>      <span class="co"># or `experiment$get_methods`</span>
<span class="co">#&gt; $OLS</span>
<span class="co">#&gt; Method Name: NULL </span>
<span class="co">#&gt;    Function: function (X, y, cols = c("X1", "X2"))  </span>
<span class="co">#&gt;    Parameters:  Named list()</span>
<span class="fu"><a href="../reference/get_funs.html">get_evaluators</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>   <span class="co"># or `experiment$get_evaluators`</span>
<span class="co">#&gt; $`Rejection Prob. (alpha = 0.1)`</span>
<span class="co">#&gt; Evaluator Name: NULL </span>
<span class="co">#&gt;    Function: function (fit_results, vary_params = NULL, alpha = 0.05)  </span>
<span class="co">#&gt;    Parameters: List of 1</span>
<span class="co">#&gt;      $ alpha: num 0.1</span>
<span class="co">#&gt;    R Markdown Options: List of 3</span>
<span class="co">#&gt;      $ digits : num 3</span>
<span class="co">#&gt;      $ sigfig : logi FALSE</span>
<span class="co">#&gt;      $ options:List of 2</span>
<span class="co">#&gt;       ..$ scrollX       : logi TRUE</span>
<span class="co">#&gt;       ..$ scrollCollapse: logi TRUE</span>
<span class="co">#&gt;    Show in R Markdown: TRUE</span>
<span class="fu"><a href="../reference/get_funs.html">get_visualizers</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>  <span class="co"># or `experiment$get_visualizers`</span>
<span class="co">#&gt; $Power</span>
<span class="co">#&gt; Visualizer Name: NULL </span>
<span class="co">#&gt;    Function: function (fit_results, vary_params = NULL, col = "X1")  </span>
<span class="co">#&gt;    Parameters:  Named list()</span>
<span class="co">#&gt;    R Markdown Options: List of 2</span>
<span class="co">#&gt;      $ height: num 10</span>
<span class="co">#&gt;      $ width : num 8</span>
<span class="co">#&gt;    Show in R Markdown: TRUE</span>
<span class="co">#&gt; $`Rejection Prob. (alpha = 0.1) Plot`</span>
<span class="co">#&gt; Visualizer Name: NULL </span>
<span class="co">#&gt;    Function: function (eval_results, vary_params = NULL, alpha = 0.05)  </span>
<span class="co">#&gt;    Parameters: List of 1</span>
<span class="co">#&gt;      $ alpha: num 0.1</span>
<span class="co">#&gt;    R Markdown Options: List of 2</span>
<span class="co">#&gt;      $ height: num 6</span>
<span class="co">#&gt;      $ width : num 10</span>
<span class="co">#&gt;    Show in R Markdown: TRUE</span>
<span class="fu"><a href="../reference/vary_across.html">get_vary_across</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>  <span class="co"># or `experiment$get_vary_across`</span>
<span class="co">#&gt; $dgp</span>
<span class="co">#&gt; $dgp$`Linear Gaussian DGP`</span>
<span class="co">#&gt; $dgp$`Linear Gaussian DGP`$sigma</span>
<span class="co">#&gt; [1] 1 2 4 8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $method</span>
<span class="co">#&gt; list()</span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_save_dir.html">get_save_dir</a></span><span class="op">(</span><span class="va">experiment</span><span class="op">)</span>     <span class="co"># or `experiment$get_save_dir`</span>
<span class="co">#&gt; [1] "./results/Linear Regression Experiment"</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by James Duncan, Tiffany Tang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
